a:3:{s:8:"etagFile";s:32:"fe08eb3e0340b5cbfd9982305cd1a516";s:4:"file";s:40:"assets/ckeditor/plugins/indent/plugin.js";s:7:"content";s:9680:"ï»¿
(function(){var listNodeNames={ol:1,ul:1},isNotWhitespaces=CKEDITOR.dom.walker.whitespaces(true),isNotBookmark=CKEDITOR.dom.walker.bookmark(false,true);function indentCommand(editor,name){this.name=name;var useClasses=this.useIndentClasses=editor.config.indentClasses&&editor.config.indentClasses.length>0;if(useClasses){this.classNameRegex=new RegExp('(?:^|\\s+)('+editor.config.indentClasses.join('|')+')(?=$|\\s)');this.indentClassMap={};for(var i=0;i<editor.config.indentClasses.length;i++)
this.indentClassMap[editor.config.indentClasses[i]]=i+1;}
this.startDisabled=name=='outdent';this.allowedContent={'div h1 h2 h3 h4 h5 h6 ol p pre ul':{propertiesOnly:true,styles:!useClasses?'margin-left,margin-right':null,classes:useClasses?editor.config.indentClasses:null}};this.requiredContent=['p'+(useClasses?'('+editor.config.indentClasses[0]+')':'{margin-left}'),'li'];}
function getIndentCssProperty(element,dir){return(dir||element.getComputedStyle('direction'))=='ltr'?'margin-left':'margin-right';}
function isListItem(node){return node.type==CKEDITOR.NODE_ELEMENT&&node.is('li');}
indentCommand.prototype={context:'p',refresh:function(editor,path){var list=path&&path.contains(listNodeNames),firstBlock=path.block||path.blockLimit;if(list)
this.setState(CKEDITOR.TRISTATE_OFF);else if(!this.useIndentClasses&&this.name=='indent')
this.setState(CKEDITOR.TRISTATE_OFF);else if(!firstBlock)
this.setState(CKEDITOR.TRISTATE_DISABLED);else if(this.useIndentClasses){var indentClass=firstBlock.$.className.match(this.classNameRegex),indentStep=0;if(indentClass){indentClass=indentClass[1];indentStep=this.indentClassMap[indentClass];}
if((this.name=='outdent'&&!indentStep)||(this.name=='indent'&&indentStep==editor.config.indentClasses.length))
this.setState(CKEDITOR.TRISTATE_DISABLED);else
this.setState(CKEDITOR.TRISTATE_OFF);}else{var indent=parseInt(firstBlock.getStyle(getIndentCssProperty(firstBlock)),10);if(isNaN(indent))
indent=0;if(indent<=0)
this.setState(CKEDITOR.TRISTATE_DISABLED);else
this.setState(CKEDITOR.TRISTATE_OFF);}},exec:function(editor){var self=this,database={};function indentList(listNode){var startContainer=range.startContainer,endContainer=range.endContainer;while(startContainer&&!startContainer.getParent().equals(listNode))
startContainer=startContainer.getParent();while(endContainer&&!endContainer.getParent().equals(listNode))
endContainer=endContainer.getParent();if(!startContainer||!endContainer)
return;var block=startContainer,itemsToMove=[],stopFlag=false;while(!stopFlag){if(block.equals(endContainer))
stopFlag=true;itemsToMove.push(block);block=block.getNext();}
if(itemsToMove.length<1)
return;var listParents=listNode.getParents(true);for(var i=0;i<listParents.length;i++){if(listParents[i].getName&&listNodeNames[listParents[i].getName()]){listNode=listParents[i];break;}}
var indentOffset=self.name=='indent'?1:-1,startItem=itemsToMove[0],lastItem=itemsToMove[itemsToMove.length-1];var listArray=CKEDITOR.plugins.list.listToArray(listNode,database);var baseIndent=listArray[lastItem.getCustomData('listarray_index')].indent;for(i=startItem.getCustomData('listarray_index');i<=lastItem.getCustomData('listarray_index');i++){listArray[i].indent+=indentOffset;if(indentOffset>0){var listRoot=listArray[i].parent;listArray[i].parent=new CKEDITOR.dom.element(listRoot.getName(),listRoot.getDocument());}}
for(i=lastItem.getCustomData('listarray_index')+1;i<listArray.length&&listArray[i].indent>baseIndent;i++)
listArray[i].indent+=indentOffset;var newList=CKEDITOR.plugins.list.arrayToList(listArray,database,null,editor.config.enterMode,listNode.getDirection());if(self.name=='outdent'){var parentLiElement;if((parentLiElement=listNode.getParent())&&parentLiElement.is('li')){var children=newList.listNode.getChildren(),pendingLis=[],count=children.count(),child;for(i=count-1;i>=0;i--){if((child=children.getItem(i))&&child.is&&child.is('li'))
pendingLis.push(child);}}}
if(newList)
newList.listNode.replace(listNode);if(pendingLis&&pendingLis.length){for(i=0;i<pendingLis.length;i++){var li=pendingLis[i],followingList=li;while((followingList=followingList.getNext())&&followingList.is&&followingList.getName()in listNodeNames){if(CKEDITOR.env.ie&&!li.getFirst(function(node){return isNotWhitespaces(node)&&isNotBookmark(node);}))
li.append(range.document.createText('\u00a0'));li.append(followingList);}
li.insertAfter(parentLiElement);}}}
function indentBlock(){var iterator=range.createIterator(),enterMode=editor.config.enterMode;iterator.enforceRealBlocks=true;iterator.enlargeBr=enterMode!=CKEDITOR.ENTER_BR;var block;while((block=iterator.getNextParagraph(enterMode==CKEDITOR.ENTER_P?'p':'div')))
indentElement(block);}
function indentElement(element,dir){if(element.getCustomData('indent_processed'))
return false;if(self.useIndentClasses){var indentClass=element.$.className.match(self.classNameRegex),indentStep=0;if(indentClass){indentClass=indentClass[1];indentStep=self.indentClassMap[indentClass];}
if(self.name=='outdent')
indentStep--;else
indentStep++;if(indentStep<0)
return false;indentStep=Math.min(indentStep,editor.config.indentClasses.length);indentStep=Math.max(indentStep,0);element.$.className=CKEDITOR.tools.ltrim(element.$.className.replace(self.classNameRegex,''));if(indentStep>0)
element.addClass(editor.config.indentClasses[indentStep-1]);}else{var indentCssProperty=getIndentCssProperty(element,dir),currentOffset=parseInt(element.getStyle(indentCssProperty),10);if(isNaN(currentOffset))
currentOffset=0;var indentOffset=editor.config.indentOffset||40;currentOffset+=(self.name=='indent'?1:-1)*indentOffset;if(currentOffset<0)
return false;currentOffset=Math.max(currentOffset,0);currentOffset=Math.ceil(currentOffset/indentOffset)*indentOffset;element.setStyle(indentCssProperty,currentOffset?currentOffset+(editor.config.indentUnit||'px'):'');if(element.getAttribute('style')==='')
element.removeAttribute('style');}
CKEDITOR.dom.element.setMarker(database,element,'indent_processed',1);return true;}
var selection=editor.getSelection(),bookmarks=selection.createBookmarks(1),ranges=selection&&selection.getRanges(1),range;var iterator=ranges.createIterator();while((range=iterator.getNextRange())){var rangeRoot=range.getCommonAncestor(),nearestListBlock=rangeRoot;while(nearestListBlock&&!(nearestListBlock.type==CKEDITOR.NODE_ELEMENT&&listNodeNames[nearestListBlock.getName()]))
nearestListBlock=nearestListBlock.getParent();if(!nearestListBlock){var selectedNode=range.getEnclosedNode();if(selectedNode&&selectedNode.type==CKEDITOR.NODE_ELEMENT&&selectedNode.getName()in listNodeNames){range.setStartAt(selectedNode,CKEDITOR.POSITION_AFTER_START);range.setEndAt(selectedNode,CKEDITOR.POSITION_BEFORE_END);nearestListBlock=selectedNode;}}
if(nearestListBlock&&range.startContainer.type==CKEDITOR.NODE_ELEMENT&&range.startContainer.getName()in listNodeNames){var walker=new CKEDITOR.dom.walker(range);walker.evaluator=isListItem;range.startContainer=walker.next();}
if(nearestListBlock&&range.endContainer.type==CKEDITOR.NODE_ELEMENT&&range.endContainer.getName()in listNodeNames){walker=new CKEDITOR.dom.walker(range);walker.evaluator=isListItem;range.endContainer=walker.previous();}
if(nearestListBlock){var firstListItem=nearestListBlock.getFirst(isListItem),hasMultipleItems=!!firstListItem.getNext(isListItem),rangeStart=range.startContainer,indentWholeList=firstListItem.equals(rangeStart)||firstListItem.contains(rangeStart);if(!(indentWholeList&&(self.name=='indent'||self.useIndentClasses||parseInt(nearestListBlock.getStyle(getIndentCssProperty(nearestListBlock)),10))&&indentElement(nearestListBlock,!hasMultipleItems&&firstListItem.getDirection())))
indentList(nearestListBlock);}else
indentBlock();}
CKEDITOR.dom.element.clearAllMarkers(database);editor.forceNextSelectionCheck();selection.selectBookmarks(bookmarks);}};CKEDITOR.plugins.add('indent',{requires:'list',lang:'af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sq,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh',icons:'indent,indent-rtl,outdent,outdent-rtl',onLoad:function(){if(CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat){CKEDITOR.addCss(".cke_editable ul,"+".cke_editable ol"+"{"+" margin-left: 0px;"+" padding-left: 40px;"+"}");}},init:function(editor){if(editor.blockless)
return;var indent=editor.addCommand('indent',new indentCommand(editor,'indent')),outdent=editor.addCommand('outdent',new indentCommand(editor,'outdent'));if(editor.ui.addButton){editor.ui.addButton('Indent',{label:editor.lang.indent.indent,command:'indent',directional:true,toolbar:'indent,20'});editor.ui.addButton('Outdent',{label:editor.lang.indent.outdent,command:'outdent',directional:true,toolbar:'indent,10'});}
editor.on('dirChanged',function(e){var range=editor.createRange();range.setStartBefore(e.data.node);range.setEndAfter(e.data.node);var walker=new CKEDITOR.dom.walker(range),node;while((node=walker.next())){if(node.type==CKEDITOR.NODE_ELEMENT){if(!node.equals(e.data.node)&&node.getDirection()){range.setStartAfter(node);walker=new CKEDITOR.dom.walker(range);continue;}
var classes=editor.config.indentClasses;if(classes){var suffix=(e.data.dir=='ltr')?['_rtl','']:['','_rtl'];for(var i=0;i<classes.length;i++){if(node.hasClass(classes[i]+suffix[0])){node.removeClass(classes[i]+suffix[0]);node.addClass(classes[i]+suffix[1]);}}}
var marginLeft=node.getStyle('margin-right'),marginRight=node.getStyle('margin-left');marginLeft?node.setStyle('margin-left',marginLeft):node.removeStyle('margin-left');marginRight?node.setStyle('margin-right',marginRight):node.removeStyle('margin-right');}}});}});})();";}